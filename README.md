This project implements a Traffic Light Controller system using an STM32F407 microcontroller, where real-time traffic stage data is transmitted from a Raspberry Pi and processed by the STM32. The data exchange happens through UART serial communication, handled entirely through interrupt-driven byte-by-byte reception using HAL_UART_Receive_IT() and HAL_UART_RxCpltCallback(). This guarantees that incoming data bytes are captured instantaneously without ever blocking the CPU, even at high data flow conditions.

Once a complete packet is received — detected by the “EOF” termination pattern — a FreeRTOS task (StartPacketProcessor) parses the data into usable parameters such as number of stages, stage durations, and LED activation patterns. A mutex-protected shared data model ensures that the parsed packet information is safely published to the rest of the program without risk of race conditions.

A separate FreeRTOS LED controller task (StartLEDController) runs through traffic stages sequentially. Each stage updates the GPIO output pins to illuminate active directions on a simulated LED intersection. Stage timing is enforced using a FreeRTOS software timer, ensuring precise and non-blocking delays between state transitions. The microcontroller continuously prints decoded packet content and stage execution information to CuteCom / serial terminal for debugging and verification.

This architecture demonstrates a clean separation between interrupt-driven UART data ingestion, multi-threaded task execution, synchronized resource access via mutexes, and accurate timing through software timers. This version was specifically implemented for scenarios where UART interrupts are preferred over DMA, and it ensures reliable full-packet capture and real-time LED control without sacrificing timing accuracy or CPU efficiency.
